{
  "openapi": "3.0.0",
  "info": {
    "title": "Biblioteka API",
    "version": "1.0.0",
    "description": "Kompletna dokumentacija API-ja za sistem iznajmljivanja knjiga."
  },
  "servers": [
    {
      "url": "https://overflowing-spirit-production-fde5.up.railway.app",
      "description": "Production server"
    },
    {
      "url": "http://localhost:5000",
      "description": "Lokalni server"
    }
  ],
  "tags": [
    { "name": "Auth", "description": "Login i registracija" },
    { "name": "Korisnik", "description": "Profil i informacije o ulogovanom korisniku" },
    { "name": "Publikacije", "description": "Pregled knjiga u biblioteci" },
    { "name": "Admin", "description": "Administrativno upravljanje korisnicima" },
    { "name": "Zaduženja", "description": "Upravljanje pozajmicama i vraćanjem knjiga" },
    { "name": "Eksterno", "description": "Integracija sa Google Books i Open Library" },
    { "name": "Ostalo", "description": "Kontakt forma i citati" }
  ],
  "paths": {
    "/api/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Prijava na sistem",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string" },
                  "lozinka": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Vraća JWT token" } }
      }
    },
    "/api/registracija": {
      "post": {
        "tags": ["Auth"],
        "summary": "Registracija novog studenta",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ime": { "type": "string" },
                  "prezime": { "type": "string" },
                  "email": { "type": "string" },
                  "lozinka": { "type": "string" },
                  "brojIndeksa": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "201": { "description": "Korisnik kreiran" } }
      }
    },
    "/api/publikacije": {
      "get": {
        "tags": ["Publikacije"],
        "summary": "Lista svih dostupnih knjiga",
        "responses": { "200": { "description": "Niz svih publikacija" } }
      }
    },
    "/api/me": {
      "get": {
        "tags": ["Korisnik"],
        "summary": "Podaci o trenutno ulogovanom korisniku",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "Vraća profil korisnika" } }
      }
    },
    "/api/moje-knjige": {
      "get": {
        "tags": ["Korisnik"],
        "summary": "Lista aktivnih zaduženja ulogovanog studenta",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "Niz zaduženja" } }
      }
    },
    "/api/citati": {
      "get": {
        "tags": ["Ostalo"],
        "summary": "Dobavljanje nasumičnog citata",
        "responses": { "200": { "description": "Vraća tekst citata" } }
      }
    },
    "/api/kontakt": {
      "post": {
        "tags": ["Ostalo"],
        "summary": "Slanje poruke biblioteci preko kontakt forme",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ime": { "type": "string" },
                  "email": { "type": "string" },
                  "poruka": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Mejl uspešno poslat" } }
      }
    },
    "/api/zaduzi-knjigu": {
      "post": {
        "tags": ["Zaduženja"],
        "summary": "Zaduživanje knjige studentu",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "publikacijaId": { "type": "integer" },
                  "brojIndeksa": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Uspešno zaduženo" } }
      }
    },
    "/api/razduzi/{id}": {
      "put": {
        "tags": ["Zaduženja"],
        "summary": "Vraćanje knjige",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } }
        ],
        "responses": { "200": { "description": "Knjiga vraćena" } }
      }
    },
    "/api/admin/studenti": {
      "get": {
        "tags": ["Admin"],
        "summary": "Lista svih studenata",
        "security": [{ "bearerAuth": [] }],
        "responses": { "200": { "description": "Niz studenata" } }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}